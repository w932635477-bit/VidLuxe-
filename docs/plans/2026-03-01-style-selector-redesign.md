# 风格选择器重设计方案

**日期**: 2026-03-01
**状态**: 已批准
**优先级**: 高 - 关乎项目成败

---

## 一、问题背景

### 1.1 现有方案

项目当前采用"选择预设风格，悬停查看效果"的交互方式：

```
用户流程：上传素材 → 选择内容类型 → 选择风格来源 → 选择预设风格(4选1) → 执行
```

**现有 4 种预设风格**：
- 杂志大片 (magazine)
- 温柔日系 (soft)
- 都市职场 (urban)
- 复古胶片 (vintage)

### 1.2 核心问题

| 问题层 | 问题描述 | 根本原因 |
|--------|----------|----------|
| **Prompt层** | 4种风格无法覆盖所有需求 | 风格是"视觉方向"，不是"具体效果" |
| **交互层** | 悬停切换不直观 | 用户无法精确描述想要的效果 |
| **匹配层** | 内容类型与风格组合有限 | 5×4=20种组合，但用户需求无限 |
| **反馈层** | 效果不可预期 | 用户无法知道结果是否满意 |
| **预览图** | Before/After差异不明显 | Prompt质量和预览图质量都有问题 |

### 1.3 用户需求分析

**目标用户**：小红书博主（穿搭/美妆/生活方式/探店）

**核心需求**：
- 不同类型博主想要的效果完全不同（穿搭博主 ≠ 美妆博主）
- 用户期望用自然语言描述需求（如"韩系高级感"）
- 必须遵循图生图逻辑，不能改变原图内容

---

## 二、市场调研

### 2.1 主流产品UI模式

| 产品 | 交互模式 | 特点 |
|------|----------|------|
| **美图秀秀/醒图** | 分类滤镜 + 强度滑块 | 滤镜按场景分类，可调节强度 |
| **RoomGPT** | Before/After 滑块对比 | 拖动滑块实时对比效果 |
| **Lensa/Remini** | 风格卡片预览 | 上传后显示多种风格预览 |
| **Instagram** | 横向滚动滤镜缩略图 | 滑动预览，点击选择 |
| **VSCO** | 分类滤镜组 (A/B/C系列) | 选类别 → 滑动选择 |

### 2.2 最佳实践总结

| 原则 | 实现方式 |
|------|----------|
| **视觉优先** | 效果名称只是辅助，用户靠眼睛选择 |
| **滑动浏览** | 横向滑动缩略图，大图实时预览 |
| **分类隐藏** | 效果一屏展示，无需复杂分类 |
| **效果强度** | 选择后可用滑块微调 0-100% |
| **热门优先** | 使用频次高的效果排在前面 |
| **简化认知** | 不让用户思考"什么是韩系高级感"，直接看效果 |

### 2.3 关键洞察

> **核心发现**：成功的滤镜/风格选择器都采用"视觉化选择"而非"标签筛选"。

**错误模式**：
```
请选择标签：韩系 ✗ 日系 ✗ 复古 ✗ 高级 ✗ 温柔...
用户内心：什么是"韩系高级感"？我该怎么选？
```

**正确模式**：
```
滑动浏览效果图，看到喜欢的就点
用户内心：这个好看，就选这个！
```

---

## 三、方案对比

### 3.1 方案A：纯AI驱动

```
用户输入："韩系高级感"
     ↓
AI 生成 Prompt
     ↓
直接处理
```

**优点**：灵活性最高
**缺点**：效果不可预期，可能误解用户意图

### 3.2 方案B：标签筛选 + 预览

```
用户选择标签：[韩系] + [高级感]
     ↓
匹配效果库
     ↓
展示 3 个预览
     ↓
用户选择
```

**优点**：效果可预期
**缺点**：标签系统复杂，用户学习成本高

### 3.3 方案C：完全视觉化选择（最终选择）

```
用户滑动浏览效果缩略图
     ↓
大图实时预览 Before/After
     ↓
看到喜欢的直接选择
```

**优点**：零学习成本，所见即所得
**缺点**：效果数量需要控制（8-12个/类型）

---

## 四、最终方案

### 4.1 核心设计

**方案名称**：效果预览图库 + 视觉化选择

**核心思路**：
1. 用户不需要选择标签，直接看效果图选择
2. 预览图是精选的高质量示例（不是用户素材）
3. 效果要惊艳，让用户一眼就想用

### 4.2 用户流程

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  Step 1: AI 识别内容类型（自动，用户无感）                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📷 已识别：穿搭内容                     [不是？切换]  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  Step 2: 滑动选择效果（核心交互）                            │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                      │   │
│  │              大预览图 (精选示例图)                     │   │
│  │                                                      │   │
│  │         Before ←────────▶ After                      │   │
│  │                     滑块                             │   │
│  │                                                      │   │
│  │              韩系高级 · 奶茶色调                       │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ◀━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━▶    │
│  ┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐         │
│  │ 杂志 ││ 日系 ││ 韩系 ││ 复古 ││ 都市 ││ 胶片 ││ 清冷 │         │
│  │ 大片 ││ 温柔 ││ 高级 ││ 胶片 ││ 职场 ││ 感  ││ 感  │         │
│  └─────┘└─────┘└──█──┘└─────┘└─────┘└─────┘└─────┘         │
│                     ↑                                       │
│               当前选中效果                                   │
│                                                             │
│  Step 3: 效果强度（可选）                                    │
│  ○─────────────────●─────────────────○                     │
│  0%               50%                100%                    │
│                                                             │
│              [ 使用此效果 ]                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 搜索功能（可选）

为高级用户提供搜索入口，但不是主要交互方式：

```
┌─────────────────────────────────────────────────────────────┐
│  🔍 搜索效果...                                    [可选]   │
├─────────────────────────────────────────────────────────────┤
│  热门推荐：                                                  │
│  [杂志大片] [日系温柔] [韩系高级] [复古胶片] [都市职场]...    │
└─────────────────────────────────────────────────────────────┘
```

**使用分布预估**：
- 80% 用户：直接滑动选择
- 20% 高级用户：搜索精确效果

---

## 五、效果库设计

### 5.1 效果数量

| 内容类型 | 效果数量 | 理由 |
|----------|----------|------|
| **穿搭** | 12 个 | 核心用户群，需求最多样 |
| **美妆** | 10 个 | 核心用户群，效果差异明显 |
| **探店** | 8 个 | 氛围感为主，变化相对少 |
| **美食** | 6 个 | 效果相对统一 |
| **旅游** | 6 个 | 以风景调色为主 |
| **总计** | **42 个** | |

### 5.2 效果数据结构

```typescript
interface EffectPreset {
  id: string;
  name: string;              // "韩系高级 · 奶茶色调"
  shortName: string;         // "韩系高级" (缩略图显示)
  contentType: ContentType;  // 'outfit' | 'beauty' | 'cafe' | 'travel' | 'food'

  // 预览图（高质量示例）
  preview: {
    before: string;          // 原图 URL
    after: string;           // 效果图 URL
  };

  // Prompt 模板
  promptTemplate: string;
  negativePrompt: string;

  // 元数据
  popularity: number;        // 使用次数（用于排序）
  isHot: boolean;            // 是否热门推荐
}
```

### 5.3 预览图制作规范

**制作流程**：

```
1. 素材筛选（小红书/Pinterest/Unsplash）
   └── 标准：符合目标用户审美、光线好、构图佳

2. Prompt 精调（人工 + 多轮测试）
   └── 每个效果的 Prompt 需要反复调优

3. 生成效果图（使用项目现有 API）
   └── 确保重绘强度 0.3-0.4，不改变原图内容

4. 人工审核
   └── 标准：效果惊艳、差异明显、真实可信

5. 入库
```

**质量标准**：
- Before/After 差异明显且令人惊艳
- 不改变原图主体内容
- 色调/氛围/质感有显著提升
- 符合小红书审美趋势

**版权注意**：
- 优先使用 Unsplash/Pexels 等免费商用素材
- 或使用 AI 生成的基础图片作为原图

---

## 六、技术约束

### 6.1 图生图原则

**核心约束**：必须遵循图生图逻辑，不能改变原图内容。

**技术保障**：
- 重绘强度 (strength) 控制在 0.3-0.4
- 使用 ControlNet 保证结构一致性
- 添加内容一致性检查机制

### 6.2 额度消耗

**方案**：预览不消耗额度

| 操作 | 额度消耗 |
|------|----------|
| 滑动浏览预览图 | 0 |
| 搜索效果 | 0 |
| 选择效果 | 0 |
| 正式处理用户素材 | 正常消耗 |

---

## 七、保留 vs 修改清单

| 模块 | 决策 | 说明 |
|------|------|------|
| **ContentType 选择器** | ✅ 保留 | 改为智能识别 + 手动切换 |
| **StyleSourceSelector** | ⚠️ 简化 | "上传参考图"保留，"预设风格"改为效果库 |
| **4种预设风格** | ❌ 废弃 | 改为效果库 (42个效果) |
| **悬停切换交互** | ❌ 废弃 | 改为横向滑动 + 大图预览 |
| **style-prompts.ts** | ⚠️ 扩展 | 拆分为效果库配置 |
| **comparisonImagesByType** | ❌ 废弃 | 改为效果库中的预览图 |

---

## 八、实现计划

### Phase 1: 效果库基础（2-3天）

1. 设计效果数据结构和存储方案
2. 创建效果库配置文件
3. 实现 5 个穿搭效果作为验证

### Phase 2: UI 组件重构（3-4天）

1. 重构 StyleSelector 组件
2. 实现横向滑动选择器
3. 实现 Before/After 滑块预览
4. 添加效果强度滑块

### Phase 3: 效果库完善（5-7天）

1. 制作全部 42 个效果的预览图
2. 精调每个效果的 Prompt
3. 实现智能内容类型识别
4. 添加搜索功能

### Phase 4: 测试与优化（2-3天）

1. 用户测试
2. 效果排序优化
3. 性能优化

---

## 九、风险与缓解

| 风险 | 缓解措施 |
|------|----------|
| 预览图效果不够惊艳 | 人工精选 + 多轮测试 |
| 42个效果制作工作量大 | 分批完成，先完成穿搭/美妆 |
| 效果与用户预期不符 | 提供效果强度调节 |
| 用户找不到想要的效果 | 添加搜索 + 热门推荐 |

---

## 十、总结

### 核心改变

| 维度 | 之前 | 之后 |
|------|------|------|
| **选择方式** | 4个预设风格 + 悬停切换 | 42个效果 + 滑动选择 |
| **用户认知** | 需要理解风格含义 | 所见即所得 |
| **操作步骤** | 点击选择 → 悬停预览 → 确认 | 滑动浏览 → 点击选择 |
| **效果可见性** | 预设示例图 | 精选高质量预览图 |
| **学习成本** | 中 | 零 |

### 成功指标

- 用户选择时间 < 30秒
- 效果满意度 > 80%
- 复购率提升

---

*文档创建时间: 2026-03-01*
