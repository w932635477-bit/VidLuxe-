# Claude Code Skills åŠŸèƒ½è§£æ

> æœ¬æ–‡æ¡£ä»‹ç» VidLuxe é¡¹ç›®ä¸­å¯ç”¨çš„ Claude Code Skillsï¼ŒåŒ…æ‹¬åŠŸèƒ½è¯´æ˜ã€ä½¿ç”¨åœºæ™¯å’Œæ“ä½œæŒ‡å—ã€‚

---

## ç›®å½•

1. [Autonomous TDDï¼ˆè‡ªä¸»æµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰](#1-autonomous-tddè‡ªä¸»æµ‹è¯•é©±åŠ¨å¼€å‘)
2. [Parallel Refactorï¼ˆå¤š Agent å¹¶è¡Œé‡æ„ï¼‰](#2-parallel-refactorå¤š-agent-å¹¶è¡Œé‡æ„)
3. [Deploy Checklistï¼ˆéƒ¨ç½²æ£€æŸ¥æ¸…å•ï¼‰](#3-deploy-checklistéƒ¨ç½²æ£€æŸ¥æ¸…å•)
4. [å¿«é€Ÿå‚è€ƒè¡¨](#4-å¿«é€Ÿå‚è€ƒè¡¨)
5. [æœ€ä½³å®è·µ](#5-æœ€ä½³å®è·µ)

---

## 1. Autonomous TDDï¼ˆè‡ªä¸»æµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰

### åŠŸèƒ½æ¦‚è¿°

Autonomous TDD æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–å¼€å‘å·¥ä½œæµï¼Œå®ƒèƒ½å¤Ÿï¼š
- å…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹å®šä¹‰é¢„æœŸè¡Œä¸º
- è‡ªä¸»å®ç°åŠŸèƒ½ä»£ç 
- è‡ªåŠ¨è¿è¡Œæµ‹è¯•å¹¶åˆ†æå¤±è´¥åŸå› 
- è¿­ä»£ä¿®å¤ç›´åˆ°æ‰€æœ‰æµ‹è¯•é€šè¿‡
- æ— éœ€äººå·¥å¹²é¢„å®Œæˆæ•´ä¸ªå¼€å‘å¾ªç¯

### å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Autonomous TDD Flow                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. å®šä¹‰éœ€æ±‚  â”€â”€â–¶  2. ç¼–å†™æµ‹è¯•  â”€â”€â–¶  3. è¿è¡Œæµ‹è¯•            â”‚
â”‚        â”‚                                    â”‚                â”‚
â”‚        â”‚                                    â–¼                â”‚
â”‚        â”‚         5. ä¿®å¤é€šè¿‡ï¼Ÿ â—€â”€â”€ 4. åˆ†æå¤±è´¥              â”‚
â”‚        â”‚              â”‚                                      â”‚
â”‚        â”‚         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                â”‚
â”‚        â”‚         â”‚         â”‚                                â”‚
â”‚        â”‚        æ˜¯         å¦                               â”‚
â”‚        â”‚         â”‚         â”‚                                â”‚
â”‚        â”‚         â–¼         â–¼                                â”‚
â”‚        â”‚    6. å®Œæˆ    7. åº”ç”¨ä¿®å¤ â”€â”€â–¶ è¿”å›æ­¥éª¤ 3           â”‚
â”‚        â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | ç¤ºä¾‹ |
|------|------|
| **åŠŸèƒ½ Bug ä¿®å¤** | ä¿®å¤è§†é¢‘ä¸Šä¼ åéŸ³é¢‘ä¸¢å¤±çš„é—®é¢˜ |
| **æ–°åŠŸèƒ½å¼€å‘** | å®ç°ç”¨æˆ·ç™»å½•ã€JWT è®¤è¯åŠŸèƒ½ |
| **API å¼€å‘** | å®ç°æ”¯ä»˜å›è°ƒæ¥å£ |
| **ä»£ç é‡æ„** | é‡å†™æ•°æ®å¤„ç†é€»è¾‘ |

### ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬ç”¨æ³•

```
/autonomous-tdd "å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼ŒåŒ…æ‹¬ JWT è®¤è¯ã€åˆ·æ–° tokenã€ä¼šè¯ç®¡ç†"
```

#### è¯¦ç»†ç”¨æ³•

```
/autonomous-tdd

å®ç°å›¾ç‰‡æ‰¹é‡ä¸Šä¼ åŠŸèƒ½ï¼Œå…·ä½“è¦æ±‚ï¼š
1. æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
2. æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
3. å¤±è´¥åè‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
4. æ”¯æŒå–æ¶ˆä¸Šä¼ 

æµ‹è¯•è¦†ç›–ï¼š
- Happy path: æ­£å¸¸ä¸Šä¼  10 å¼ å›¾ç‰‡
- è¾¹ç¼˜æƒ…å†µ: ä¸Šä¼ è¶…å¤§æ–‡ä»¶ã€ç½‘ç»œä¸­æ–­
- é”™è¯¯å¤„ç†: æ— æ•ˆæ–‡ä»¶ç±»å‹ã€æœåŠ¡å™¨é”™è¯¯
```

### è‡ªåŠ¨åŒ–è§„åˆ™

| è§„åˆ™ | è¯´æ˜ |
|------|------|
| **è‡ªåŠ¨ä¿®å¤** | æµ‹è¯•å¤±è´¥åè‡ªåŠ¨åˆ†æå¹¶ä¿®å¤ï¼Œä¸è¯¢é—®æƒé™ |
| **è¿è¡Œæµ‹è¯•** | æ¯æ¬¡ä»£ç ä¿®æ”¹åè‡ªåŠ¨è¿è¡Œæµ‹è¯• |
| **åˆ‡æ¢æ–¹æ¡ˆ** | åŒä¸€é—®é¢˜å¡ä½ 5 æ¬¡åå°è¯•ä¸åŒå®ç°æ–¹å¼ |
| **è®°å½•æ—¥å¿—** | è®°å½•æ‰€æœ‰å°è¯•å’Œç»“æœ |
| **æœ€å¤§å°è¯•** | é»˜è®¤ 20 æ¬¡æ€»å°è¯•ï¼Œå•ä¸ªé—®é¢˜ 5 æ¬¡ |

### ç¤ºä¾‹è¾“å‡º

```markdown
# TDD è¿›åº¦æŠ¥å‘Š

## åŠŸèƒ½: å›¾ç‰‡æ‰¹é‡ä¸Šä¼ 

### æµ‹è¯•çŠ¶æ€
- [x] æµ‹è¯• 1: æ­£å¸¸ä¸Šä¼  10 å¼ å›¾ç‰‡ âœ… PASSING
- [x] æµ‹è¯• 2: æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½ âœ… PASSING
- [x] æµ‹è¯• 3: è¿›åº¦æ˜¾ç¤ºæ­£ç¡® âœ… PASSING
- [x] æµ‹è¯• 4: å¤±è´¥é‡è¯•æœºåˆ¶ âœ… PASSING
- [x] æµ‹è¯• 5: å–æ¶ˆä¸Šä¼ åŠŸèƒ½ âœ… PASSING

### å°è¯•æ—¥å¿—
1. å°è¯• 1: ä½¿ç”¨ FormData ä¸Šä¼  - å¤±è´¥ï¼ˆCORS é”™è¯¯ï¼‰
2. å°è¯• 2: æ·»åŠ  credentials é…ç½® - å¤±è´¥ï¼ˆä»æŠ¥é”™ï¼‰
3. å°è¯• 3: æ”¹ç”¨ Server Action - æˆåŠŸï¼

### æœ€ç»ˆçŠ¶æ€
- è¿­ä»£æ¬¡æ•°: 8
- é€šè¿‡ç‡: 5/5 (100%)
- æµ‹è¯•è¦†ç›–: 92%
```

---

## 2. Parallel Refactorï¼ˆå¤š Agent å¹¶è¡Œé‡æ„ï¼‰

### åŠŸèƒ½æ¦‚è¿°

Parallel Refactor ç”¨äºå¤§è§„æ¨¡ä»£ç é‡æ„ï¼Œå®ƒèƒ½å¤Ÿï¼š
- åŒæ—¶åœ¨å¤šä¸ªæ¶æ„å±‚è¿›è¡Œé‡æ„
- é€šè¿‡å…±äº«è®¡åˆ’æ–‡ä»¶åè°ƒå¤šä¸ª Agent
- è‡ªåŠ¨å¤„ç†è·¨å±‚ä¾èµ–å…³ç³»
- æ”¯æŒ git worktree éš”ç¦»é¿å…å†²çª

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COORDINATION LAYER                        â”‚
â”‚                  migration-plan.md                           â”‚
â”‚   (å…±äº«çŠ¶æ€ã€æ–‡ä»¶å£°æ˜ã€ä¾èµ–å…³ç³»ã€è¿›åº¦è¿½è¸ª)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Agent A â”‚ â”‚ Agent B â”‚ â”‚ Agent C â”‚ â”‚ Agent D â”‚
   â”‚  Store  â”‚ â”‚Componentsâ”‚ â”‚   API   â”‚ â”‚  Tests  â”‚
   â”‚ çŠ¶æ€ç®¡ç† â”‚ â”‚ UI ç»„ä»¶  â”‚ â”‚ æœåŠ¡ç«¯  â”‚ â”‚ æµ‹è¯•æ–‡ä»¶ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    æœ€ç»ˆåˆå¹¶æŠ¥å‘Š
```

### ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | ç¤ºä¾‹ |
|------|------|
| **çŠ¶æ€ç®¡ç†è¿ç§»** | Redux â†’ Zustand |
| **ç»„ä»¶æ¨¡å¼å‡çº§** | Class ç»„ä»¶ â†’ Hooks |
| **ç±»å‹ç³»ç»Ÿè¿ç§»** | JavaScript â†’ TypeScript |
| **æ¡†æ¶å‡çº§** | React 17 â†’ React 18 |
| **API å¥‘çº¦å˜æ›´** | REST â†’ GraphQL |

### ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬ç”¨æ³•

```
/parallel-refactor

å°†é¡¹ç›®ä¸­çš„æ‰€æœ‰ Redux ä»£ç è¿ç§»åˆ° Zustandï¼š
- 5 ä¸ª store æ–‡ä»¶
- 20 ä¸ªä½¿ç”¨ Redux hooks çš„ç»„ä»¶
- 15 ä¸ªæµ‹è¯•æ–‡ä»¶

è¯·åˆ›å»ºè¿ç§»è®¡åˆ’å¹¶å¯åŠ¨å¹¶è¡Œ Agent æ‰§è¡Œã€‚
```

#### é«˜çº§ç”¨æ³•ï¼ˆå¸¦ä¾èµ–å…³ç³»ï¼‰

```
/parallel-refactor

è¿ç§» Style-to-Effect ç³»ç»Ÿï¼š

æ—§æ¨¡å¼ï¼š
- ä½¿ç”¨ style enum é€‰æ‹©æ•ˆæœ
- store ä¸­ä¿å­˜ styleId

æ–°æ¨¡å¼ï¼š
- ä½¿ç”¨ effect å¯¹è±¡é…ç½®æ•ˆæœ
- store ä¸­ä¿å­˜å®Œæ•´çš„ effect é…ç½®

ä¾èµ–å…³ç³»ï¼š
- Store å±‚å¿…é¡»å…ˆå®Œæˆï¼ˆAgent Aï¼‰
- Components ä¾èµ– Storeï¼ˆAgent B ç­‰å¾… Agent Aï¼‰
- API å’Œ Tests å¯å¹¶è¡Œï¼ˆAgent Cã€Dï¼‰

å¼€å§‹æ‰§è¡Œè¿ç§»ã€‚
```

### è¿ç§»è®¡åˆ’æ¨¡æ¿

Agent ä¼šè‡ªåŠ¨åˆ›å»º `migration-plan.md`ï¼š

```markdown
# Migration Plan: Redux â†’ Zustand

## Overview
- Started: 2026-03-01 14:30
- Pattern: Redux (createStore, useSelector) â†’ Zustand (create, useStore)
- Total Files: 40

## Layer Assignments

### Store Layer (Agent A)
| File | Status | Claimed By | Notes |
|------|--------|------------|-------|
| store/user.ts | âœ… complete | Agent A | Tests passing |
| store/video.ts | ğŸ”„ in_progress | Agent A | Started 14:35 |
| store/image.ts | â³ pending | | |

### Component Layer (Agent B)
| File | Status | Claimed By | Notes |
|------|--------|------------|-------|
| components/UserList.tsx | â³ pending | | Waits for store/user.ts |
| components/VideoPlayer.tsx | â³ pending | | |

### API Layer (Agent C)
| File | Status | Claimed By | Notes |
|------|--------|------------|-------|
| api/user/route.ts | â³ pending | | |

### Test Layer (Agent D)
| File | Status | Claimed By | Notes |
|------|--------|------------|-------|
| __tests__/user.test.ts | â³ pending | | |

## Dependencies
- Components ä¾èµ– Store å®Œæˆ
- Tests æœ€åæ‰§è¡Œ

## Progress Summary
- Store: 1/5 complete (20%)
- Components: 0/20 complete (0%)
- API: 0/5 complete (0%)
- Tests: 0/10 complete (0%)
```

### æ–‡ä»¶å£°æ˜åè®®

Agent é€šè¿‡åŸå­æ€§å£°æ˜é¿å…å†²çªï¼š

```markdown
# å£°æ˜å‰
| store/user.ts | â³ pending | | |

# Agent A å£°æ˜
| store/user.ts | ğŸ”„ in_progress | Agent A | Started 14:30 |

# Agent A å®Œæˆ
| store/user.ts | âœ… complete | Agent A | Tests passing |
```

### æœ€ç»ˆæŠ¥å‘Š

```markdown
# Migration Complete: Redux â†’ Zustand

## Summary
- Files Migrated: 38/40
- Tests Passing: 35/36
- Duration: 45 minutes
- Issues Encountered: 3

## By Layer
- Store: 5/5 âœ…
- Components: 18/20 âš ï¸ (2 need manual review)
- API: 5/5 âœ…
- Tests: 10/11 âš ï¸ (1 flaky)

## Manual Follow-up Required
1. components/ComplexForm.tsx - å¤šä¸ª store äº¤äº’ï¼Œéœ€æ‰‹åŠ¨å¤„ç†
2. components/LegacyWidget.tsx - ä½¿ç”¨äº†å·²åºŸå¼ƒçš„ API

## Recommendations
- [ ] ä¿®å¤ flaky test
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] æ€§èƒ½æµ‹è¯•
```

---

## 3. Deploy Checklistï¼ˆéƒ¨ç½²æ£€æŸ¥æ¸…å•ï¼‰

### åŠŸèƒ½æ¦‚è¿°

Deploy Checklist æ˜¯éƒ¨ç½²å‰çš„éªŒè¯æ¸…å•ï¼Œç¡®ä¿ï¼š
- ä»£ç æ— ç±»å‹é”™è¯¯
- æ„å»ºæˆåŠŸ
- æµ‹è¯•é€šè¿‡
- æœåŠ¡å™¨èµ„æºå……è¶³
- éƒ¨ç½²åæœåŠ¡æ­£å¸¸

### æ£€æŸ¥æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Deploy Checklist Flow                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. TypeScript æ£€æŸ¥ â”€â”€â–¶ 2. æ„å»ºéªŒè¯ â”€â”€â–¶ 3. æµ‹è¯•è¿è¡Œ        â”‚
â”‚         â”‚                    â”‚                â”‚              â”‚
â”‚         â–¼                    â–¼                â–¼              â”‚
â”‚      é€šè¿‡ï¼Ÿ               é€šè¿‡ï¼Ÿ           é€šè¿‡ï¼Ÿ            â”‚
â”‚         â”‚                    â”‚                â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                              â”‚                                â”‚
â”‚                              â–¼                                â”‚
â”‚                    4. æœåŠ¡å™¨æ£€æŸ¥                              â”‚
â”‚                    - ç£ç›˜ç©ºé—´                                 â”‚
â”‚                    - æœåŠ¡çŠ¶æ€                                 â”‚
â”‚                              â”‚                                â”‚
â”‚                              â–¼                                â”‚
â”‚                    5. æ‰§è¡Œéƒ¨ç½²                                â”‚
â”‚                              â”‚                                â”‚
â”‚                              â–¼                                â”‚
â”‚                    6. éƒ¨ç½²éªŒè¯                                â”‚
â”‚                    - HTTPS è®¿é—®                               â”‚
â”‚                    - API å¥åº·                                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬ç”¨æ³•

```
/deploy-checklist
```

#### å¿«é€Ÿå‘½ä»¤

```bash
# æœ¬åœ°éªŒè¯
pnpm typecheck && pnpm build && echo "âœ… æ„å»ºéªŒè¯é€šè¿‡"

# æœåŠ¡å™¨æ£€æŸ¥
ssh -i ~/.ssh/id_vidluxe root@146.56.193.40 "df -h && pm2 status"

# éƒ¨ç½²åéªŒè¯
curl -s https://vidluxe.com.cn/api/health
```

### æ£€æŸ¥æ¸…å•è¯¦æƒ…

#### 1. TypeScript ç±»å‹æ£€æŸ¥

```bash
pnpm typecheck
# æˆ–
npx tsc --noEmit
```

#### 2. æ„å»ºéªŒè¯

```bash
pnpm build
```

#### 3. æµ‹è¯•è¿è¡Œ

```bash
pnpm test
pnpm test:e2e  # E2E æµ‹è¯•
```

#### 4. æœåŠ¡å™¨å‡†å¤‡

```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
ssh root@146.56.193.40 "df -h"

# å¦‚æœä½¿ç”¨ç‡ > 80%ï¼Œæ¸…ç†ç©ºé—´
ssh root@146.56.193.40 "docker system prune -af && rm -rf /tmp/*"

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
ssh root@146.56.193.40 "pm2 status"
```

#### 5. æ‰§è¡Œéƒ¨ç½²

```bash
# 1. æœ¬åœ°æ„å»º
pnpm build

# 2. æ‰“åŒ…
tar --exclude='node_modules' --exclude='.git' \
    -czf /tmp/vidluxe.tar.gz apps packages pnpm-lock.yaml

# 3. ä¸Šä¼ 
scp -i ~/.ssh/id_vidluxe /tmp/vidluxe.tar.gz root@146.56.193.40:/tmp/

# 4. éƒ¨ç½²
ssh root@146.56.193.40 "cd /opt/vidluxe && tar -xzf /tmp/vidluxe.tar.gz"
ssh root@146.56.193.40 "cd /opt/vidluxe && pnpm install --prod"
ssh root@146.56.193.40 "pm2 restart vidluxe"
```

#### 6. éƒ¨ç½²åéªŒè¯

```bash
# æ£€æŸ¥æœåŠ¡
ssh root@146.56.193.40 "pm2 status vidluxe"

# æ£€æŸ¥æ—¥å¿—
ssh root@146.56.193.40 "pm2 logs vidluxe --lines 20"

# HTTPS è®¿é—®æµ‹è¯•
curl -s -o /dev/null -w "%{http_code}" https://vidluxe.com.cn
curl -s -o /dev/null -w "%{http_code}" https://www.vidluxe.com.cn

# API å¥åº·æ£€æŸ¥
curl -s https://vidluxe.com.cn/api/health
```

### å¸¸è§é—®é¢˜å¤„ç†

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| ç£ç›˜æ»¡ | `docker system prune -af` |
| pnpm workspace é”™è¯¯ | åŒ…å« `packages/` ç›®å½• |
| Module not found | è¿è¡Œ `pnpm install --prod` |
| 502 Bad Gateway | æ£€æŸ¥ pm2 çŠ¶æ€ï¼Œé‡å¯æœåŠ¡ |
| DNS æœªæ›´æ–° | ç­‰å¾…ä¼ æ’­ï¼Œä½¿ç”¨ `dig @8.8.8.8` |

### å›æ»šæ–¹æ¡ˆ

```bash
ssh root@146.56.193.40 << 'EOF'
  cd /opt
  rm -rf vidluxe
  mv vidluxe_old vidluxe
  pm2 restart vidluxe
EOF
```

---

## 4. å¿«é€Ÿå‚è€ƒè¡¨

### Skills å¯¹ç…§è¡¨

| é—®é¢˜ç±»å‹ | æ¨è Skill | å‘½ä»¤ç¤ºä¾‹ |
|----------|-----------|----------|
| **åŠŸèƒ½ Bug** | `/autonomous-tdd` | `/autonomous-tdd "ä¿®å¤è§†é¢‘ä¸Šä¼ åéŸ³é¢‘ä¸¢å¤±"` |
| **æ–°åŠŸèƒ½å¼€å‘** | `/autonomous-tdd` | `/autonomous-tdd "å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"` |
| **å¤§è§„æ¨¡é‡æ„** | `/parallel-refactor` | `/parallel-refactor` + è¿ç§»æè¿° |
| **éƒ¨ç½²å‰æ£€æŸ¥** | `/deploy-checklist` | `/deploy-checklist` |

### é€‚ç”¨åœºæ™¯é€ŸæŸ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é€‰æ‹©æ­£ç¡®çš„ Skill                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  éœ€è¦å®ç°æ–°åŠŸèƒ½ï¼Ÿ                                            â”‚
â”‚       â”‚                                                      â”‚
â”‚       â”œâ”€â”€ æ˜¯ â”€â”€â–¶ /autonomous-tdd                            â”‚
â”‚       â”‚                                                      â”‚
â”‚       â””â”€â”€ å¦ â”€â”€â–¶ éœ€è¦é‡æ„å¤§é‡ä»£ç ï¼Ÿ                          â”‚
â”‚                        â”‚                                     â”‚
â”‚                        â”œâ”€â”€ æ˜¯ â”€â”€â–¶ /parallel-refactor        â”‚
â”‚                        â”‚                                     â”‚
â”‚                        â””â”€â”€ å¦ â”€â”€â–¶ å‡†å¤‡éƒ¨ç½²ï¼Ÿ                  â”‚
â”‚                                          â”‚                   â”‚
â”‚                                          â”œâ”€â”€ æ˜¯ â”€â”€â–¶ /deploy-checklist
â”‚                                          â”‚                   â”‚
â”‚                                          â””â”€â”€ å¦ â”€â”€â–¶ æ‰‹åŠ¨å¤„ç†  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æœ€ä½³å®è·µ

### Autonomous TDD æœ€ä½³å®è·µ

1. **æ˜ç¡®éœ€æ±‚**ï¼šæä¾›è¯¦ç»†çš„åŠŸèƒ½æè¿°å’Œè¾¹ç•Œæ¡ä»¶
2. **å®Œæ•´æµ‹è¯•**ï¼šè¦†ç›– happy pathã€è¾¹ç¼˜æƒ…å†µã€é”™è¯¯å¤„ç†
3. **åˆç†è¶…æ—¶**ï¼šç»™å¤æ‚åŠŸèƒ½è¶³å¤Ÿçš„è¿­ä»£æ—¶é—´
4. **å®¡æŸ¥ç»“æœ**ï¼šå®Œæˆåæ£€æŸ¥ä»£ç è´¨é‡å’Œæµ‹è¯•è¦†ç›–

### Parallel Refactor æœ€ä½³å®è·µ

1. **å…ˆåˆ†æ**ï¼šæ˜ç¡®å—å½±å“çš„æ–‡ä»¶å’Œä¾èµ–å…³ç³»
2. **åˆ†ä¼˜å…ˆçº§**ï¼šè®©åŸºç¡€å±‚ï¼ˆå¦‚ Storeï¼‰å…ˆå®Œæˆ
3. **å°æ­¥éªŒè¯**ï¼šæ¯å±‚å®Œæˆåè¿è¡Œæµ‹è¯•
4. **ä¿ç•™å›æ»š**ï¼šéƒ¨ç½²å‰åˆ›å»ºå¤‡ä»½

### Deploy Checklist æœ€ä½³å®è·µ

1. **æœ¬åœ°å…ˆæµ‹**ï¼šä¸è¦è·³è¿‡æœ¬åœ°éªŒè¯
2. **æ£€æŸ¥ç©ºé—´**ï¼šéƒ¨ç½²å‰æ£€æŸ¥ç£ç›˜ç©ºé—´
3. **éªŒè¯è®¿é—®**ï¼šéƒ¨ç½²åç«‹å³éªŒè¯ HTTPS å’Œ API
4. **ä¿ç•™å¤‡ä»½**ï¼šè‡³å°‘ä¿ç•™ä¸€ä¸ªå¯å›æ»šç‰ˆæœ¬

---

## é™„å½•ï¼šSkill æ–‡ä»¶ä½ç½®

```
~/.claude/skills/
â”œâ”€â”€ autonomous-tdd/
â”‚   â””â”€â”€ SKILL.md      # è‡ªä¸»æµ‹è¯•é©±åŠ¨å¼€å‘
â”œâ”€â”€ parallel-refactor/
â”‚   â””â”€â”€ SKILL.md      # å¤š Agent å¹¶è¡Œé‡æ„
â””â”€â”€ deploy-checklist/
    â””â”€â”€ SKILL.md      # éƒ¨ç½²æ£€æŸ¥æ¸…å•
```

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2026-03-01*
*é€‚ç”¨äº VidLuxe é¡¹ç›®*
